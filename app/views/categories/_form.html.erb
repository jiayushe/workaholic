<%= form_for @category, html: { id: "needs-validation", novalidate: "novalidate" } do |c| %>
  <div class="form-row">
    <div class="form-group">
      <%= c.label :name %>
      <%= c.text_field :name, 
          class: 'form-control',
          placeholder: 'Example Category', 
          required: true %>
      <div class="invalid-feedback">
          Please provide a valid name.
      </div>
    </div>
    <div class="form-group">
      <%= c.label :tasks %>
      <%= text_field_tag "item", 
          @category.items.map { |t| t.title }.join(","), 
          class: 'form-control', 
          data: { role: 'tagsinput' } %>
    </div>
    <%= c.submit "Save", class: 'btn btn-primary' %>
  </div>
<% end %>

<script>
$("#item").tagsinput({
    freeInput: false,
    typeaheadjs: {
        name: 'item_names',
        displayKey: 'name',
        valueKey: 'name',
        source: item_names.ttAdapter()
    }
});
</script>
